---
title: "Midpoint Deliverable"
author: "RuoluYe"
date: "5/20/2020"
output: html_document
---

```{r setup, echo = FALSE, include=FALSE}
library("knitr")
source("scripts/aggregated_table.R")
source("scripts/Summary.R")
source("scripts/chart_one.R")
source("scripts/chart_two.R")
source("scripts/chart_three.R")
```

# COVID-2019 Brief Data Analysis

## Introduction
Our domain of interest is the impact of COVID-19 in the US. This spring, we have this unfortunate outbreak of virus that has threathen hundreds of thoudsands of lives int the U.S., and even more around the world. Our group hopes that, with our effort and analysis on multiple datasets about the COVID-19, we can arouse more viligance and help people to understand this disease better. The first [dataset](https://www.kaggle.com/johnjdavisiv/us-counties-covid19-weather-sociohealth-data) is a comprehensive one about each U.S county, which collects information related to their weather, socio/health and COVID-19 situation. Since its size exceeds the upload limit, we decided truncate it. We also found a second [dataset](https://data.cdc.gov/NCHS/Provisional-COVID-19-Death-Counts-by-Sex-Age-and-S/9bhg-hcku) about provisional COVID-19 Death Counts based on states, sex and ages that could help us understand the bigger picture. Finally, the dataset [US State COVID-19 Daily](https://www.kaggle.com/sudalairajkumar/covid19-in-usa?select=us_states_covid19_daily.csv) collects number of daily cases in USA, and we have a [helper dataset](https://www.kaggle.com/paultimothymooney/latitude-and-longitude-for-every-country-and-state) that stores the latitude and longitude values of states and country to assist our charts. 

## Summary Infomation
```{r, echo=FALSE, include=FALSE}
info <- get_summary_info(data_set)
info$num_most_cases
info$place_most_cases_covid_19
info$us_age_group_biggest
info$total_death_us
info$covid_deaths_males
info$covid_deaths_females
```
We used the Provisional COVID-19 Death Counts dataset to help us understand the general situation the U.S. is in. We would like to look into the impact on different age group, sex, and geometric location. In general, COVID-19 has caused `r info$total_death_us` deaths in the U.S. so far. The **place** that has the most deaths for COVID-19 is `r info$place_most_cases_covid_19`, with the number being `r info$num_most_cases`, which has surpassed many states. The **age group** that has the most people who died from COVID-19 in the U.S. is `r info$us_age_group_biggest`. For **male**, the total deaths of COVID-19 is `r info$covid_deaths_males`, and for **female**, the total deaths is `r info$covid_deaths_females`. 

## A Summary Table
Our summary table sumamrizes the total number of testings conducted in the U.S. 
It also demonstrate the number of positive and negative cases, along with the percentage of positive cases over the total number of testing in the states. The data is grouped by states so that we can compare the different situations among the states.
The table is sorts descendently by the percentage of positive cases over all the testings in each state. 
From the table, we can conclude that New Jersy has the highest percentage for positive COVID-19 cases among all the states.
We should notice that even though New York has a significantly higher number of testing conducted than New Jersy, the percentage for positive cases in NY is lower than the NJ. Another insight is some states have not conducted enough testing for COVID-19.
```{r data, echo=FALSE, comment=""}
df <- state_testing
colnames(df) <- c("State",
                  "Total Positive Cases",
                  "Total Negative Cases",
                  "Total Testings",
                  "Percent of Positive Cases")
kable(df)
```

## Charts
### First Chart
Our first chart is a line chart that reflects the daily Covid-19 death rate from this January to mid-May. We include this chart becasue we would like to see how the trend of the death rate changes over time. According to the graph, the death rate spiked up at the end of February and kept increasing until the end of March. Then steadiley decreased for about a month before it came back up again, and now the trend have been relatively constant for about a month. 
`r plot_one`

### Second Chart
Our second chart is a map that uses circle to locate each state, and shows the positive cases of COVID-19 with the size of the circle. We included this chart becasue we would appreciate a map that can shows the geometric location and visualize the postive cases number at the same time. From this map, we can tell that the Northeast ara suffers the most, and California has quite a few cases compared to other west states. According to common knowledge, we see that the more populated is the state, the more cases it has, which is also shown by the fact that the Midwest generally has fewer cases.  
`r plot_two`

### Third Chart
Our third chart is a scatter plot that shows the percent of smoking population and Covid-19 death rate of each state in the U.S. We include this chart because we would like to see if there is an associate between smoking and covid-19 death, since smoking damages people's lungs, and the impact of covid-19 is primarily on lungs as well. According to our plot, there is no significant correlation between smoking proportion and covid-19 death rate. 
`r plot_three`